<mujoco model="open_chain_leg">
    <default>
        <geom contype="1" conaffinity="0" solref="0.0005 1.0"/>

        <default class="part">
        <geom group="1" contype="2" conaffinity="1"/>
        </default>

        <default class="mockup">
        <geom group="1" contype="4"/>
        </default>

    </default>

    <asset>
        <material name="pelvis" rgba="0.45 0.45 0.75 1.0" />
        <material name="thigh" rgba="0.45 0.75 0.45 1.0" />
        <material name="shin" rgba="0.75 0.45 0.45 1.0" />
        <material name="foot" rgba="0.86 0.68 0.68 1.0" />
        <material name="loop1" rgba="0.52 0.52 0.65 1.0" />
        <material name="loop2" rgba="1.0 0.75 0.0 1.0" />
        <mesh name="cart" file="cart.STL"/>
        <mesh name="base" file="base.stl"/>
    </asset>

    <worldbody>
        <body name="base" pos="0.0 0.0 0.0">
            <geom type="mesh" mesh="base" euler="0.0 0.0 90.0"  class="mockup"/>
            <geom type="box" size="0.2 0.15 0.005" pos="0.0 -0.2 0.15" density="7700.0" rgba="0.1 0.1 0.1 1.0"/>
            
            <body name="cart" pos="0.0325 -0.14 1.0">
                <geom type="mesh" mesh="cart" euler="0.0 -180.0 -90.0" mass="0.2" rgba="0.9 0.2 0.2 1.0" class="mockup"/>
                <joint name="rail" type="slide" range="-0.5 0.5"/>

                <body name="pelvis" pos="-0.05 0.01 -0.085" euler = "0 0 90">
                    <geom type="box" size="0.045 0.085 0.01" density="750" material="pelvis" class="part"/>
                    <geom type="cylinder" size="0.085 0.0275" pos="0 0 0.0375" zaxis="0 0 1" 
                        material="pelvis" mass="1.74" class="part"/>
                    
                    <body name="thigh" pos="0 0 0.1325" euler="-45 0 0">
                    <!-- <body name="thigh" pos="0.0 -0.1325 0.0" euler="180 50 -90"> -->
                        <!-- pos = box + 2cylinder + cylinder-->    
                        <geom type="cylinder" size="0.04 0.01" pos = "0 0 -0.0575" zaxis = "0 0 1"  rgba="0.45 0.45 0.75 0.25" class="part"/>
                        <geom type="cylinder" size="0.085 0.01" pos = "0 0 -0.0375" zaxis = "0 0 1"  rgba="0.45 0.45 0.75 .25" class="part"/> 
                        <geom type="cylinder" size="0.085 0.0275" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="1.74" material="thigh" class="part"/>  
                        <geom type="box" size="0.04 0.185 0.01" pos="0.0 0.185 0.0" density="2000" material="thigh" class="part"/>           
                        <geom type="cylinder" size="0.04 0.01" pos="0 0.370 0" material="thigh" class="part"/>       
                        <joint name="hip" type="hinge" ref="50" damping="0.256"/>
                        <!-- <joint name="hip" type="hinge" ref="60" range="-45.0 90.0" damping="0.256"/> -->

                        <body name="shin" pos="0.0 0.370 -0.0475" euler="-90 0 0">
                            <geom type="box" size="0.02 0.1565 0.015" pos="0.0 0.1565 0.0" density="2000" material="shin" class="part"/>
                            <geom type="cylinder" size="0.02 0.015" pos="0 0 0" material="shin" class="part"/>
                            <geom type="cylinder" size="0.02 0.015" pos="0 .313 0" material="shin" class="part"/>
                            <site name='tip' size = "0.025" pos = "0 .313 0" material ="shin"/>
                            <joint name="knee" type="hinge" ref="-90" damping="0.256"/>
                            <!-- <joint name="knee" type="hinge" ref="-115" range="-160.0 -40.0" damping="0.256"/> -->
                            <body pos="0 0 0" euler = "110 0 0">
                                <geom type="box" size="0.034 0.02 0.01" pos="-.034 0 0" material = "shin"  density="2000" class = "part"/>
                                <geom type="cylinder" size=".02 .01" pos="-0.068 0 0" density="2000" material ="shin"/>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>

    </worldbody>

   <actuator>
		<motor name="torque_hip" joint="hip"  gear="10" ctrllimited="true" ctrlrange="-100 100"/>  
		<motor name="torque_knee" joint="knee"  gear="10" ctrllimited="true" ctrlrange="-100 100"/>
    </actuator>

    <sensor>
        <jointpos name="rail_output" joint="rail"/>

        <actuatorpos name="hip_q" actuator="torque_hip"/>
        <actuatorpos name="knee_q" actuator="torque_knee"/>

        <actuatorvel name="hip_dq" actuator="torque_hip"/>
        <actuatorvel name="knee_dq" actuator="torque_knee"/>

        <actuatorfrc name="hip_trq" actuator="torque_hip"/>
        <actuatorfrc name="knee_trq" actuator="torque_knee"/>
    </sensor>

</mujoco>