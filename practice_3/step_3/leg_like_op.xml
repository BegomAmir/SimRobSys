<mujoco model="leg_two">
    <default>
        <geom contype="1" conaffinity="0" solref="0.005 1.0"/>

        <default class="part">
        <geom group="1" contype="2" conaffinity="1"/>
        </default>

        <default class="mockup">
        <geom group="1" contype="4"/>
        </default>

    </default>

    <asset>
        <material name="pelvis" rgba="0.45 0.45 0.75 1.0" />
        <material name="thigh" rgba="0.45 0.75 0.45 1.0" />
        <material name="shin" rgba="0.75 0.45 0.45 1.0" />
        <material name="foot" rgba="0.86 0.68 0.68 1.0" />
        <material name="loop1" rgba="0.52 0.52 0.65 1.0" />
        <material name="loop2" rgba="1.0 0.75 0.0 1.0" />
        <mesh name="cart" file="cart.STL"/>
        <mesh name="base" file="base.stl"/>
    </asset>

    <worldbody>
        <body name="base" pos="0.0 0.0 0.0">
            <!-- стойка робота -->
            <geom type="mesh" mesh="base" euler="0.0 0.0 90.0"  class="mockup"/>
            <!-- резиновый коврик -->
            <geom type="box" size="0.2 0.15 0.005" pos="0.0 -0.2 0.15" density="7700.0" rgba="0.1 0.1 0.1 1.0"/>
            
            <body name="cart" pos="0.0325 -0.14 1.0">
                <!-- каретка; к ней подсоединена вся нога -->
                <geom type="mesh" mesh="cart" euler="0.0 -180.0 -90.0" mass="0.2" rgba="0.9 0.2 0.2 1.0" class="mockup"/>
                <joint name="rail" type="slide" range="-0.5 0.5"/>
                <!-- <joint name="rail" type="slide" range="-0.5 0.5"/> -->

                <body name="pelvis" pos="-0.05 0.01 -0.085" euler = "0 0 90">
                    <!-- кронштейн для крепления первого В1, который приводит голень -->
                    <geom type="box" size="0.045 0.085 0.01" density="750" material="pelvis" class="part"/>
                    <!-- B1 с диаметром .85 -->
                    <geom type="cylinder" size="0.085 0.0275" pos="0 0 0.0375" zaxis="0 0 1"
                        material="pelvis" mass="1.74" class="part"/>
                    
                    <body name="thigh" pos="0 0 0.1325" euler="-45 0 0">
                        <!-- 60ref было вместо 50 -->
                        <!-- тело звена; pos = box + 2cylinder + cylinder-->    
                        <!-- фланец ко второму В1 -->
                        <geom type="cylinder" size="0.04 0.01" pos = "0 0 -0.0575" zaxis = "0 0 1"  rgba="0.45 0.45 0.75 0.25" class="part"/>
                        <!-- вторая часть фланеца к ротору второго В1 -->
                        <geom type="cylinder" size="0.085 0.01" pos = "0 0 -0.0375" zaxis = "0 0 1"  rgba="0.45 0.45 0.75 .25" class="part"/> 
                        <geom type="cylinder" size="0.085 0.0275" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="1.74" material="thigh" class="part"/>  
                        <geom type="box" size="0.185 0.04 0.01" pos="0.185 0 0.0" density="2000" material="thigh" class="part"/>           
                        <geom type="cylinder" size="0.04 0.01" pos="0.370 0 0" material="thigh" class="part"/>       
                        <joint name="hip" type="hinge" ref="-45" damping="0.01"/>
                        <!-- <joint name="hip" type="hinge" ref="60" range="-45.0 90.0" damping="0.256"/> -->

                        <body name="shin" pos="0.370 0.0  -0.0475" euler="-90 0 0">
                        <!-- 115 ref было вместо 90-->
                            <geom type="box" size="0.1565 0.02 0.015" pos="0.1565 0 0.0" density="2000" material="shin" class="part"/>
                            <geom type="cylinder" size="0.02 0.015" pos="0 0 0" material="shin" class="part"/>
                            <geom type="cylinder" size="0.02 0.015" pos=".313 0 0" material="shin" class="part"/>
                            <site name='tip' size = "0.025" pos = ".313 0 0" material ="shin"/>
                            <joint name="knee" type="hinge" ref="-90" damping="0.01"/>
                            <!-- <joint name="knee" type="hinge" ref="-115" range="-160.0 -40.0" damping="0.256"/> -->
                            <body pos="0 0 0" euler = "20 0 0">
                                <geom type="box" size="0.034 0.02 0.01" pos="-.034 0 0" material = "shin"  density="2000" class = "part"/>
                                <geom type="cylinder" size=".02 .01" pos="-0.068 0 0" density="2000" material ="shin"/>
                            </body>
                        
                            <!-- <body name="foot" pos="0.0 0.313 0.0" euler="55 0 0">
                                <geom type="box" size="0.07 0.01 0.03" pos="0.0 0.03 0.0" density="100000" material="foot" class="part"/>
                                <geom type="cylinder" size="0.03 0.01" pos="0.07 0.03 0" material="foot" zaxis="0 1 0" class="part"/>
                                <geom type="cylinder" size="0.03 0.01" pos="-0.07 0.03 0" material="foot" zaxis="0 1 0" class="part"/>
                                <site name="foot_fsr" type="box" group="3" size="0.105 0.0125 0.04" pos="0.0 0.025 0.0"/>
                                <joint name="ankle_passive" type="hinge" ref="45" range="-40.0 60.0" damping="0.256"/>
                            </body> -->


                            <!-- на ступню -->
                            <!-- <body name="wishbone_up" pos="0.0 0.0 0.027" euler="-64 0 0">
                                    <geom type="cylinder" size="0.01 0.025" pos="0.025 0.0 0.0" zaxis="1 0 0" density="5000" material="loop2" class="part"/>
                                    <geom type="cylinder" size="0.015 0.01" pos="0.0 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                                    <joint name="joint3" type="hinge" damping="0.01"/>

                                    <body name="wishbone_low" pos="0.0 0.0 0.0" euler="-75 0 0">
                                        <geom type="cylinder" size="0.01 0.025" pos="0.025 0.0 0.0" zaxis="1 0 0" density="5000" material="loop2" class="part"/>
                                        <geom type="cylinder" size="0.015 0.01" pos="0.05 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                                        <body name="foot_rod_low" pos="0.05 0.0 0.0" euler="-131.97 0 0">
                                            <geom type="cylinder" size="0.01 0.1565" pos="0.1565 0.0 0.0" zaxis="1 0 0" density="5000" material="loop2" class="part"/>
                                            <geom type="cylinder" size="0.015 0.01" pos="0.313 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                                            <joint name="joint4" type="hinge" damping="0.256"/>
                                        </body>
                                    </body>

                            </body> -->

                        </body>

                        <!-- <geom type="cylinder" size="0.049 0.031" pos="-0.055 0.13485 0.02" zaxis="0 0 1"
                            mass="0.960" rgba="0.2 0.2 0.2 .75" class="part"/> -->

                        <!-- на ступню -->
                        <!-- <body name="foot_lever" pos="-0.055 0.13485 -0.02" euler="180 0 0">
                            <geom type="cylinder" size="0.01 0.025" pos="0.025 0.0 0.0" zaxis="1 0 0" density="5000" material="loop2" class="part"/>
                            <geom type="cylinder" size="0.015 0.01" pos="0.05 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                            <geom type="cylinder" size="0.015 0.01" pos="0.0 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                            <joint name="ankle_active" type="hinge" range="-45 45" damping="0.01"/>

                            <body name="foot_rod_up" pos="0.05 0.0 0.0" euler="-104 0 0">
                                <geom type="cylinder" size="0.01 0.121" pos="0.121 0.0 0.0" zaxis="1 0 0" density="5000" material="loop2" class="part"/>
                                <geom type="cylinder" size="0.015 0.01" pos="0.242 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                                <geom type="cylinder" size="0.015 0.01" pos="0.0 0.0 0.0" zaxis="0 0 1" density="7500" material="loop2" class="part"/>
                                <joint name="joint12" type="hinge" damping="0.256"/>
                            </body>

                        </body> -->

                        <body name="knee_lever" pos="0.0 0 -0.0325" euler="110 0 0">
                            <geom type="box" size=".034 .015 0.005" pos = ".034 0 0" material ="loop1" density="2000" zaxis = "0 0 1"  class="part"/>
                            <geom type="cylinder" size=".015 0.005" pos="0.068 0 0" material ="loop1" zaxis = "0 0 1" density="5000" class="part"/>
                            <joint name="joint_knee_lever" type = "hinge" axis="0 0 1" ref = "110"/>

                            <body name = 'knee_rod' pos=".068 0 0" euler = "-110 0 0">
                                <geom type="box" size=".185 .014 .0045 " pos = ".185 0 0" material ="loop1" density="2000" zaxis = "0 0 1"  class="part"/>
                                <geom type="cylinder" size=".014 .0045" pos="0.370 0 0" material ="loop1" zaxis = "0 0 1" density="5000" class="part"/>
                                <joint name="joint_knee_rod" type = "hinge" axis="0 0 1" ref = "-110"/>                  
                            </body>

                        </body>

                    </body>

                    

                </body>

            </body>
        
        </body>

    </worldbody>

    <equality>
        <connect name="shin_constrain" body1="shin" body2="knee_rod" anchor="-0.0639 -0.02326 0.0" solref="0.0005 1.0"/>
        <!-- <connect name="foot_constrain" body1="foot" body2="foot_rod_low" anchor="-0.045 0.009 0.0" solref="0.0005 1.0"/> -->
        <!-- <connect name="wishbone_constrain" body1="foot_rod_up" body2="wishbone_up" anchor="0.242 0.0 0.0" solref="0.0005 1.0"/> -->
    </equality>

   <actuator>
		<motor name="torque_hip" joint="hip"  gear="1" ctrllimited="true" ctrlrange="-100 100"/>
		<position name ="pos_servo_hip" joint="hip" kp="0"/>
		<velocity name ="vel_servo_hip" joint="hip" kv="0"/>
        
		<motor name="torque_knee" joint="joint_knee_lever"  gear="1" ctrllimited="true" ctrlrange="-100 100"/>
		<position name ="pos_servo_knee" joint="joint_knee_lever" kp="0"/>
		<velocity name ="vel_servo_knee" joint="joint_knee_lever" kv="0"/>
        
        <!-- <motor name="hip_motor" joint="hip" gear="8.66" ctrlrange="-16.16 16.16"/> -->
        <!-- <motor name="knee_motor" joint="knee" gear="8.66" ctrlrange="-16.16 16.16"/> -->
        <!-- <motor name="foot_motor" joint="ankle_active" gear="9.0" ctrlrange="-4.5 4.5"/> -->
    </actuator>

    <sensor>
        <!-- <actuatorfrc name='meas_J1' joint="hip"/> -->
        <!-- <actuatorfrc name='meas_J2' joint="joint_knee_rod"/> -->
        <!-- <jointpos name="rail_output" joint="rail"/>

        <actuatorpos name="hip_q" actuator="hip_motor"/>
        <actuatorpos name="knee_q" actuator="knee_motor"/>
        <actuatorpos name="toe_q" actuator="foot_motor"/>

        <actuatorvel name="hip_dq" actuator="hip_motor"/>
        <actuatorvel name="knee_dq" actuator="knee_motor"/>
        <actuatorvel name="toe_dq" actuator="foot_motor"/>

        <actuatorfrc name="hip_trq" actuator="hip_motor"/>
        <actuatorfrc name="knee_trq" actuator="knee_motor"/>
        <actuatorfrc name="toe_trq" actuator="foot_motor"/>

        <force name="foot_force" site="foot_fsr"/> -->
    </sensor>

</mujoco>