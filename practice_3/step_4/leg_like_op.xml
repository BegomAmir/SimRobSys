<mujoco model="leg_two">
    <default>
        <geom contype="1" conaffinity="0" solref="0.005 1.0"/>

        <default class="part">
        <geom group="1" contype="2" conaffinity="1"/>
        </default>

        <default class="mockup">
        <geom group="1" contype="4"/>
        </default>

    </default>

    <asset>
        <material name="pelvis" rgba="0.45 0.45 0.75 1.0" />
        <material name="thigh" rgba="0.45 0.75 0.45 0.6" />
        <material name="shin" rgba="0.75 0.45 0.45 1.0" />
        <material name="foot" rgba="0.86 0.68 0.68 1.0" />
        <material name="loop1" rgba="0.52 0.52 0.65 1.0" />
        <material name="loop2" rgba="1.0 0.75 0.0 1.0" />
        <mesh name="cart" file="cart.STL"/>
        <mesh name="base" file="base.stl"/>
    </asset>

    <worldbody>
        <body name="base" pos="0.0 0.0 0.0">
            <!-- стойка робота -->
            <geom type="mesh" mesh="base" euler="0.0 0.0 90.0"  class="mockup"/>
            <!-- резиновый коврик -->
            <geom type="box" size="0.2 0.15 0.005" pos="0.0 -0.2 0.15" density="7700.0" rgba="0.1 0.1 0.1 1.0"/>
            
            <body name="cart" pos="0.0325 -0.14 0.8">
                <!-- каретка; к ней подсоединена вся нога -->
                <geom type="mesh" mesh="cart" euler="0.0 -180.0 -90.0" mass="0.2" rgba="0.9 0.2 0.2 1.0" class="mockup"/>
                <joint name="rail" type="slide" range="-0.50 1.5"/>
                <!-- <joint name="rail" type="slide" range="-0.5 0.5"/> -->

                <body name="pelvis" pos="-0.05 0.01 -0.085" euler = "0 0 90">
                    <geom type="cylinder" size="0.044  0.020" mass="0.7923" material="pelvis" class="part"/>
                    <geom type="cylinder" size="0.085 0.0168" pos="0 0 0.0368" zaxis="0 0 1" material="pelvis" mass="1.9655" class="part"/>
                    
                    <body name="thigh" pos="0 0 0.1199" euler="-45 0 0">
                        <geom type="cylinder" size="0.085 0.0168" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="1.9655" material="thigh" class="part"/> 
                        <geom type="box" size="0.185 0.065 0.005" pos="0.185 0 -0.0168" mass="1.0363" material="thigh" class="part"/>           
                        <geom type="cylinder" size="0.065 0.005" pos="0.370 0 -0.0168" mass="0.05" material="thigh" class="part"/> 
                        <geom type="box" size="0.185 0.065 0.005" pos="0.185 0 -0.0763" mass="1.0425" material="thigh" class="part"/> 
                        <geom type="cylinder" size="0.065 0.005" pos="0.370 0 -0.0763" mass="0.05" material="thigh" class="part"/>

                        <geom type="cylinder" size="0.04 0.012375" pos = "0 0 -0.053925" zaxis = "0 0 1"  mass="0.0829" rgba="0.45 0.45 0.75 0.25" class="part"/>
                        <geom type="cylinder" size="0.07 0.012375" pos = "0 0 -0.029175" zaxis = "0 0 1"  mass="0.0829" rgba="0.45 0.45 0.75 .25" class="part"/> 
                        
                        <joint name="hip" type="hinge" ref="-45" range="-135.0 0.0" damping="0.1"/>

                        <body name="shin" pos="0.370 0.0  -0.0475" euler="-90 0 0">
                            <geom type="box" size="0.160 0.02 0.01" pos="0.160 0 0.0" mass="0.6" material="shin" class="part"/>
                            <geom type="cylinder" size="0.02 0.01" pos="0 0 0"  mass="0.01" material="shin" class="part"/>
                            <geom type="cylinder" size="0.02 0.01" pos=".320 0 0" mass="0.01" material="shin" class="part"/>
                            <site name='tip' size = "0.0025" pos = ".291 0 0" material ="shin"/>

                            <body pos="0 0 0" euler = "8.5 0 0">
                                <geom type="box" size="0.034 0.012 0.008" pos="-.034 0 0" mass="0.1625" material = "shin" class = "part"/>
                                <geom type="cylinder" size=".012 .008" pos="-0.068 0 0" mass="0.01" material ="shin" class = "part"/>
                            </body>

                            <joint name="knee" type="hinge" ref="-90" damping="0.1"/>     
                        
                            <body name="foot" pos="0.34 0.0 0.0" euler="-45 0 0">
                                <geom type="box" size="0.07 0.01 0.03" pos="0.0 0.016 0.0" mass="0.3142" material="foot" class="part"/>
                                <geom type="cylinder" size="0.03 0.01" pos="0.07 0.016 0" mass="0.01" material="foot" zaxis="0 1 0" class="part"/>
                                <geom type="cylinder" size="0.03 0.01" pos="-0.07 0.016 0" mass="0.01" material="foot" zaxis="0 1 0" class="part"/>
                                <site name="foot_fsr" type="box" group="3" size="0.105 0.0125 0.04" pos="0.0 0.025 0.0"/>
                                <joint name="ankle_passive" type="hinge" ref="-45" damping="0.256"/>
                            </body>


                            <!-- на ступню -->
                            <body name="wishbone_left_up" pos="0.0 0.0 0.0175" euler="-168.1 0 0">
                                    <geom type="cylinder" size="0.005 0.0275" pos="0.0275 0.0 0.0" zaxis="1 0 0" mass="0.0446" material="loop2" class="part"/>
                                    <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                                    <joint name="joint_wishbone_left_up" type="hinge" damping="0.01"/>

                                    <body name="wishbone_right_up" pos="0.0 0.0 0.0" euler="-60 0 0">
                                        <geom type="cylinder" size="0.005 0.0275" pos="0.0275 0.0 0.0" zaxis="1 0 0" mass="0.0446" material="loop2" class="part"/>
                                        <geom type="cylinder" size="0.01 0.005" pos="0.05 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                                        <body name="foot_rod_right_up" pos="0.05 0.0 0.0" euler="228.3 0 0">
                                            <geom type="cylinder" size="0.005 0.160" pos="0.160 0.0 0.0" zaxis="1 0 0" mass="0.0743" material="loop2" class="part"/>
                                            <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.0326" material="loop2" class="part"/>
                                            <geom type="cylinder" size="0.01 0.005" pos="0.320 0.0 0.0" zaxis="0 0 1" mass="0.0130" material="loop2" class="part"/>
                                            <joint name="joint_foot_rod_right_up" type="hinge" damping="0.1"/>
                                        </body>
                                    </body>

                            </body>

                            <body name="wishbone_left_down" pos="0.0 0.0 -0.0175" euler="-168.1 0 0">
                                    <geom type="cylinder" size="0.005 0.0275" pos="0.0275 0.0 0.0" zaxis="1 0 0" mass="0.0446" material="loop2" class="part"/>
                                    <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                                    <joint name="joint_wishbone_left_down" type="hinge" damping="0.01"/>

                                    <body name="wishbone_right_down" pos="0.0 0.0 0.0" euler="-60 0 0">
                                        <geom type="cylinder" size="0.005 0.0275" pos="0.0275 0.0 0.0" zaxis="1 0 0" mass="0.0446" material="loop2" class="part"/>
                                        <geom type="cylinder" size="0.01 0.005" pos="0.05 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                                        <body name="foot_rod_right_down" pos="0.05 0.0 0.0" euler="228.3 0 0">
                                            <geom type="cylinder" size="0.005 0.160" pos="0.160 0.0 0.0" zaxis="1 0 0" mass="0.0743" material="loop2" class="part"/>
                                            <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.0326" material="loop2" class="part"/>
                                            <geom type="cylinder" size="0.01 0.005" pos="0.320 0.0 0.0" zaxis="0 0 1" mass="0.0130" material="loop2" class="part"/>
                                            <joint name="joint_foot_rod_right_down" type="hinge" damping="0.1"/>
                                        </body>
                                    </body>

                            </body>

                        </body>

                        <geom type="cylinder" size="0.049 0.031" pos="0.1342 -0.055  0.02" zaxis="0 0 1" mass="0.960" rgba="0.2 0.2 0.2 .75" class="part"/>
                        <geom type="cylinder" size="0.049 0.031" pos="0.1342  0.055  0.02" zaxis="0 0 1" mass="0.960" rgba="0.2 0.2 0.2 .75" class="part"/>    

                        <!-- на ступню -->
                        <body name="foot_lever_up" pos="0.13485 0.055  -0.03" euler="101.8 0 0">
                            <geom type="cylinder" size="0.005 0.0275" pos="0.0275 0.0 0.0" zaxis="1 0 0" mass="0.0749" material="loop2" class="part"/>
                            <geom type="cylinder" size="0.01 0.005" pos="0.055 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                            <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                            <joint name="joint_foot_lever_up" type="hinge" ref="101.8"  damping="0.1"/>

                            <body name="foot_rod_up" pos="0.055 0.0  0.0" euler="-114.9 0 0">
                                <geom type="cylinder" size="0.005 0.121" pos="0.121 0.0 0.0" zaxis="1 0 0" mass="0.0432" material="loop2" class="part"/>
                                <geom type="cylinder" size="0.01 0.005" pos="0.242 0.0 0.0" zaxis="0 0 1" mass="0.0326" material="loop2" class="part"/>
                                <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.0326" material="loop2" class="part"/>
                                <joint name="joint_foot_rod_up" type="hinge" damping="0.1"/>
                            </body>

                        </body>

                        <body name="foot_lever_down" pos="0.13485 -0.055  -0.065" euler="101.8 0 0">
                            <geom type="cylinder" size="0.005 0.0275" pos="0.0275 0.0 0.0" zaxis="1 0 0" mass="0.0398" material="loop2" class="part"/>
                            <geom type="cylinder" size="0.01 0.005" pos="0.055 0.0 0.0" zaxis="0 0 1" mass="0.01" material="loop2" class="part"/>
                            <geom type="cylinder" size="0.01 0.03" pos="0.0 0.0 0.017" zaxis="0 0 1" mass="0.1826" material="loop2" class="part"/>
                            <joint name="joint_foot_lever_down" type="hinge" ref="101.8"  damping="0.265"/>

                            <body name="foot_rod_down" pos="0.055 0.0  0.0" euler="-88.6 0 0">
                                <geom type="cylinder" size="0.005 0.121" pos="0.121 0.0 0.0" zaxis="1 0 0" mass="0.0432" material="loop2" class="part"/>
                                <geom type="cylinder" size="0.01 0.005" pos="0.242 0.0 0.0" zaxis="0 0 1" mass="0.0326" material="loop2" class="part"/>
                                <geom type="cylinder" size="0.01 0.005" pos="0.0 0.0 0.0" zaxis="0 0 1" mass="0.0326" material="loop2" class="part"/>
                                <joint name="joint_foot_rod_down" type="hinge" damping="0.1"/>
                            </body>
                        </body>

                        <body name="knee_lever" pos="0.0 0 -0.0298" euler="98.393 0 0">
                            <geom type="box" size=".034 .015 0.0065" pos = ".034 0 0" material ="loop1" mass="0.0712" zaxis = "0 0 1"  class="part"/>
                            <geom type="cylinder" size=".015 0.0065" pos="0.068 0 0" material ="loop1" mass="0.01" zaxis = "0 0 1" class="part"/>
                            <joint name="joint_knee_lever" type = "hinge" axis="0 0 1" ref = "98.393"/>

                            <body name = 'knee_rod' pos=".068 0 -0.0175" euler = "-98.393 0 0">
                                <geom type="box" size=".185 .014 .0045 " pos = ".185 0 0" material ="loop1" mass="0.2015" zaxis = "0 0 1"  class="part"/>
                                <geom type="cylinder" size=".014 .0045" pos="0 0 0" material ="loop1" mass="0.0432" zaxis = "0 0 1" class="part"/>
                                <geom type="cylinder" size=".014 .0045" pos="0.370 0 0" material ="loop1" mass="0.0432" zaxis = "0 0 1" class="part"/>
                                <joint name="joint_knee_rod" type = "hinge" axis="0 0 1" ref = "-98.393"/>                  
                            </body>
                        </body>

                    </body>

                </body>

            </body>
        
        </body>

    </worldbody>

    <equality>
        <connect name="shin_constrain" body1="shin" body2="knee_rod" anchor="-0.0673 -0.0099 0.0" solref="0.0005 1.0"/>
        <connect name="wishbone_constrain_up" body1="foot_rod_up" body2="wishbone_left_up" anchor="0.242 0.0 0.0" solref="0.0005 1.0"/>
        <connect name="wishbone_constrain_down" body1="foot_rod_down" body2="wishbone_left_down" anchor="0.242 0.0 0.0" solref="0.0005 1.0"/>
        <connect name="foot_constrain_up" body1="foot" body2="foot_rod_right_up" anchor="-0.0562 0.004 0.0" solref="0.0005 1.0"/>
        <connect name="foot_constrain_down" body1="foot" body2="foot_rod_right_down" anchor="-0.0562 0.004 0.0" solref="0.0005 1.0"/>
    </equality>

   <actuator>
		<motor name="torque_hip" joint="hip"  gear="1" ctrllimited="true" ctrlrange="-140 140"/>
		<position name ="pos_servo_hip" joint="hip" kp="0"/>
		<velocity name ="vel_servo_hip" joint="hip" kv="0"/>
        
		<motor name="torque_knee" joint="joint_knee_lever"  gear="1" ctrllimited="true" ctrlrange="-140 140"/>
		<position name ="pos_servo_knee" joint="joint_knee_lever" kp="0"/>
		<velocity name ="vel_servo_knee" joint="joint_knee_lever" kv="0"/>

        <motor name="torque_foot" joint="joint_foot_lever_up"  gear="1" ctrllimited="true" ctrlrange="-140 140"/>

        <!-- <motor name="torque_ankle" joint="ankle_active"  gear="1" ctrllimited="true" ctrlrange="-100 100"/> -->
        
        <!-- <motor name="hip_motor" joint="hip" gear="8.66" ctrlrange="-16.16 16.16"/> -->
        <!-- <motor name="knee_motor" joint="knee" gear="8.66" ctrlrange="-16.16 16.16"/> -->
        <!-- <motor name="foot_motor" joint="ankle_active" gear="9.0" ctrlrange="-4.5 4.5"/> -->
    </actuator>

    <sensor>
        <actuatorfrc name='act_torque_hip' actuator="torque_hip"/>
        <actuatorfrc name='act_torque_knee' actuator="torque_knee"/>
        <actuatorfrc name='act_torque_foot' actuator="torque_foot"/>


        <!-- <jointpos name="rail_output" joint="rail"/>

        <actuatorpos name="hip_q" actuator="hip_motor"/>
        <actuatorpos name="knee_q" actuator="knee_motor"/>
        <actuatorpos name="toe_q" actuator="foot_motor"/>

        <actuatorvel name="hip_dq" actuator="hip_motor"/>
        <actuatorvel name="knee_dq" actuator="knee_motor"/>
        <actuatorvel name="toe_dq" actuator="foot_motor"/>

        <actuatorfrc name="hip_trq" actuator="hip_motor"/>
        <actuatorfrc name="knee_trq" actuator="knee_motor"/>
        <actuatorfrc name="toe_trq" actuator="foot_motor"/>

        <force name="foot_force" site="foot_fsr"/> -->
    </sensor>
</mujoco>